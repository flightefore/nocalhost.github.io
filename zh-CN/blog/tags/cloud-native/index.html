<!doctype html>
<html lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/zh-CN/blog/rss.xml" title="Nocalhost Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-CN/blog/atom.xml" title="Nocalhost Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Nocalhost" href="/zh-CN/opensearch.xml">
<link rel="icon" href="/zh-CN/img/favicon.ico">
<link rel="manifest" href="/zh-CN/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><title data-react-helmet="true">2 篇文章 文章标记 &quot;cloud-native&quot; | Nocalhost</title><meta data-react-helmet="true" property="og:title" content="2 篇文章 文章标记 &quot;cloud-native&quot; | Nocalhost"><meta data-react-helmet="true" property="og:url" content="https://nocalhost.dev//zh-CN/blog/tags/cloud-native"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-react-helmet="true" rel="shortcut icon" href="/zh-CN/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nocalhost.dev//zh-CN/blog/tags/cloud-native"><link data-react-helmet="true" rel="alternate" href="https://nocalhost.dev//blog/tags/cloud-native" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nocalhost.dev//zh-CN/blog/tags/cloud-native" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://nocalhost.dev//blog/tags/cloud-native" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/zh-CN/assets/css/styles.e982e9c5.css">
<link rel="preload" href="/zh-CN/assets/js/runtime~main.3aebd872.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/main.47873b72.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">跳到主要内容</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarContent_3EUC announcementBarCloseable_3myR">⭐️ If you like Nocalhost, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/nocalhost/nocalhost">GitHub</a>! ⭐</div><button type="button" class="announcementBarClose_38nx clean-btn" aria-label="关闭"><span aria-hidden="true">×</span></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-CN/"><img src="/zh-CN/img/logo.png" alt="Most productive cloud-native development toolsets" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh-CN/img/logo.png" alt="Most productive cloud-native development toolsets" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Nocalhost</b></a><a class="navbar__item navbar__link" href="/zh-CN/docs/introduction">文档</a><a class="navbar__item navbar__link" href="/zh-CN/videos">视频</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-CN/blog">博客</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>中文（中国）</span></span></a><ul class="dropdown__menu"><li><a href="/blog/tags/cloud-native" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/zh-CN/blog/tags/cloud-native" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">中文（中国）</a></li></ul></div><a href="https://github.com/nocalhost/nocalhost" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-tags-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="近期博客内容导航"><div class="sidebarItemTitle_2hhb margin-bottom--md">All our posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh-CN/blog/2021/07/05/jimmy">如何调试 Kubernetes 中的微服务 ——proxy、sidecar 还是 service mesh？</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh-CN/blog/2021/01/01/">重新定义云原生开发环境</a></li></ul></nav></aside><main class="col col--7"><header class="margin-bottom--xl"><h1>2 篇文章 文章标记 &quot;cloud-native&quot;</h1><a href="/zh-CN/blog/tags">查看所有标签</a></header><article class="margin-bottom--xl"><header><h2 class="blogPostTitle_GeHD"><a href="/zh-CN/blog/2021/07/05/jimmy">如何调试 Kubernetes 中的微服务 ——proxy、sidecar 还是 service mesh？</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-07-05T00:00:00.000Z">July 5, 2021</time> · 阅读时间: 2 分钟</div><div class="avatar margin-vert--md"><a href="https://github.com/rootsongjc" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/3328185?v=4" alt="Jimmy Song"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/rootsongjc" target="_blank" rel="noopener noreferrer">Jimmy Song</a></div><small class="avatar__subtitle">Developer advocate at Tetrate</small></div></div></header><div class="markdown"><blockquote><p>此博文首次发表于 <a href="https://jimmysong.io/en/blog/how-to-debug-microservices-in-kubernetes-with-proxy-sidecar-or-service-mesh/" target="_blank" rel="noopener noreferrer">Jimmy 的博客</a></p></blockquote><p>本文讲解了调试 Kubernetes 中微服务的三种模式/工具，以及 Istio 的引入为微服务的调试带来的变革。</p><p>Kubernetes 可以说是目前为止用来运行微服务的最佳载体，但是在调试 Kubernetes 环境中的微服务时的体验可能就没那么友好了。本文将带你了解如何调试 Kubernetes 中的微服务，介绍常用的工具，以及 Istio 的引入为微服务的调试带来的变革。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="调试微服务与传统单体应用有巨大的不同"></a>调试微服务与传统单体应用有巨大的不同<a class="hash-link" href="#调试微服务与传统单体应用有巨大的不同" title="直接链接到标题">#</a></h2><p>微服务的调试是一直长期困扰软件开发人员的问题，这在传统的单体应用中不存在，因为开发者可以利用 IDE 中的调试器，为应用程序增加断点、修改环境变量，单步执行等，这些都为软件调试提供了巨大帮助。随着 Kubernetes 的流行，微服务的调试就成了一个棘手的问题，其中相比传统单体应用的调试多了以下问题：</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="多依赖"></a>多依赖<a class="hash-link" href="#多依赖" title="直接链接到标题">#</a></h3><p>一个微服务往往依赖多个其他微服务，在调试某个微服务时，如何部署其他依赖服务以快速搭建一套最新的 stagging 环境？</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="从本地机器访问"></a>从本地机器访问<a class="hash-link" href="#从本地机器访问" title="直接链接到标题">#</a></h3><p>微服务在开发者的本地电脑上运行时，通常无法直接访问到 Kubernetes 集群中的服务，如何像调试本地服务一样调试部署在 Kubernetes 集群中的微服务？</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="开发效率低下"></a>开发效率低下<a class="hash-link" href="#开发效率低下" title="直接链接到标题">#</a></h3><p>通常情况下，代码从更新到构建成镜像再推送到集群中需要一个漫长的过程，如何加快开发速度？</p><p>我们一起来看下哪些工具能够解决以上问题。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="工具"></a>工具<a class="hash-link" href="#工具" title="直接链接到标题">#</a></h2><p>调试 Kubernetes 中的微服务的主要解决方案有：</p><ul><li>Proxy：在 Kubernetes 集群和本地调试终端中部署一个代理，通过构建一个 VPN，使得本地应用可以直接访问到 Kubernetes 中的服务；</li><li>Sidecar：替换原来应用容器的镜像为开发镜像，可以在这个容器中中对该服务进行调试，同时在要调试的微服务 pod 中注入一个 sidecar 作为辅助工具来同步代码；</li><li>服务网格：要想了解应用的整体情况，就需要在所有微服务中注入 sidecar，这样你就可以获得一个监控全局状态的仪表板；</li></ul><p>下面是实现以上解决方案的三个典型的开源项目，它们分别从不同的角度可以帮助你调试微服务。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="proxy-模式：telepresence"></a>Proxy 模式：Telepresence<a class="hash-link" href="#proxy-模式：telepresence" title="直接链接到标题">#</a></h3><p><a href="https://www.telepresence.io/" target="_blank" rel="noopener noreferrer">Telepresence</a> 本质上是一个本地代理，该代理将 Kubernetes 集群中的数据卷、环境变量、网络都代理到了本地。下图展示的是 Teleprence 的主要使用场景。</p><figure class="img-frame"><img class="gif-img" src="/zh-CN/img/blog/how-to-debug-microservices/telepresence.jpeg"><figcaption>Proxy 模式: Telepresence</figcaption></figure><p>用户需要在本地自主地执行 <code>telepresence</code> 命令，它会自动将代理部署到 Kubernetes 中，有了该代理之后：</p><ul><li>本地的服务就可以完整的访问到 Kubernetes 集群中的其他服务、环境变量、Secret、ConfigMap 等；</li><li>集群中的服务还能直接访问到本地暴露出来的端点；</li></ul><p>但是这种方式仍然不够连贯，还需要用户在本地调试时运行多次命令，而且在某些网络环境下可能无法与 Kubernetes 集群建立 VPN 连接。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sidecar-模式：nocalhost"></a>Sidecar 模式：Nocalhost<a class="hash-link" href="#sidecar-模式：nocalhost" title="直接链接到标题">#</a></h3><p><a href="https://nocalhost.dev/" target="_blank" rel="noopener noreferrer">Nocalhost</a> 是一个基于 Kubernetes 的云端开发工具。要想使用它，你只需要在你的 IDE （如VS Code） 中安装一个插件即可扩展 Kubernetes，并缩短开发反馈周期。通过为不同的用户创建不同的 namespace，并使用 ServiceAccount 绑定到不同用户角身上时，就可以实现开发环境隔离。同时，Nocalhost 还提供了 Web 控制台和 API，方便管理员来管理不同的开发环境。</p><figure class="img-frame"><img class="gif-img" src="/zh-CN/img/blog/how-to-debug-microservices/sidecar-nocalhost.jpeg"><figcaption>Sidecar 模式: Nocalhost</figcaption></figure><p>只要你有一个 Kubernetes 集群，并且拥有集群的管理员权限，就可以参考 <a href="/zh-CN/docs/quick-start">Nocalhost 快速开始</a> 试用 Nocalhost。 要在 VS Code 中使用 Nocalhost 插件，需要先在插件中配置 Kubernetes 集群。</p><ol><li>选择刚刚导出的 KubeConfig 文件或者直接复制粘贴文件内容到配置中</li><li>然后选择需要测试的服务，选择对应的 DevContainer, VS Code 会自动打开一个新的代码窗口。</li></ol><p>这是 Istio 提供的 <a href="https://istio.io/latest/docs/examples/bookinfo/" target="_blank" rel="noopener noreferrer">bookinfo sample</a> 示例。 您可以在本地 IDE 中打开克隆的代码，然后单击代码文件旁边的锤子进入开发模式。 选择对应的 DevContainer，Nocalhost，会自动在pod中注入一个开发容器sidecar，在终端自动进入容器，如下图所示。</p><figure class="img-frame"><img class="gif-img" src="/zh-CN/img/blog/how-to-debug-microservices/nocalhost-vs-code.jpeg"><figcaption>Nocalhost VS Code</figcaption></figure><p>在开发模式下，如果你在本地修改代码，Nocalhost 会自动将代码同步到远端容器，实现代码修改结果在远程开发环境实时生效，无需重建镜像，可大大加快开发速度。 同时，Nocalhost 还提供了管理开发环境和用户权限的服务器，如下图所示:</p><figure class="img-frame"><img class="gif-img" src="/zh-CN/img/blog/how-to-debug-microservices/nocalhost-web-admin.jpeg"><figcaption>Nocalhost 服务端</figcaption></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="service-mesh-模式：istio"></a>Service Mesh 模式：Istio<a class="hash-link" href="#service-mesh-模式：istio" title="直接链接到标题">#</a></h3><p>以上使用 proxy 和 sidecar 的方式，一次只能对一个服务进行调试，如果想要掌握服务的全局状况，比如获取的服务的指标，以及通过分布式追踪了解服务的依赖和调用流程，对服务的性能进行调试。这些<a href="https://istio.io/latest/zh/docs/concepts/observability/" target="_blank" rel="noopener noreferrer">可观察性</a>的功能，需要为所有服务统一注入 sidecar 来实现。</p><p>而且，当你的服务正处于从虚拟机迁移到 Kubernetes 的过程中时，使用 Istio 可以将虚拟机与 Kubernetes 纳入一个网络平面中（如下图所示），方便开发者调试和做渐进式的迁移。</p><figure class="img-frame"><img class="gif-img" src="/zh-CN/img/blog/how-to-debug-microservices/istio-service-mesh.jpeg"><figcaption>Service Mesh mode: Istio</figcaption></figure><p>当然要获得这些好处也不是一点“代价”也不没有的，引入 Istio 后，你的 Kubernetes service 需要遵守 Istio 的<a href="https://istio.io/latest/zh/docs/ops/deployment/requirements/" target="_blank" rel="noopener noreferrer">命名规范</a>，学习使用 <a href="https://istio.io/latest/docs/ops/diagnostic-tools/istioctl-analyze/" target="_blank" rel="noopener noreferrer">Istioctl</a> 命令行和日志的方式来调试微服务。</p><ul><li>使用 <code>istioctl analyze</code> 命令来调试集群中的微服务部署情况，可以使用 YAML 文件来检查某个命名空间或整个集群中的资源部署情况。</li><li>使用 <code>istioctl proxy-config secret</code> 来调试 service mesh 中的 pod 的 secret 被正确的加载并有效。</li></ul><p>Istio 的配置信息在大型的集群部署中传播将会耗时更长并且可能有几秒钟的延迟时间，sidecar 的引入会给服务间调用带来一定延迟。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="总结"></a>总结<a class="hash-link" href="#总结" title="直接链接到标题">#</a></h2><p>在应用微服务化和从虚拟机迁移到 Kubernetes 的过程中，开发者需要很多观念和习惯上的转变。通过 proxy 在本地跟 Kubernetes 间构建 VPN，可以方便开发者像调试本地服务一样调试 Kubernetes 中的服务。通过向 pod 中注入 sidecar，可以实现实时调试，加快开发进度。最后，Istio service mesh 真正实现了全局的可观察性，你还可以使用像 <a href="https://www.tetrate.io/tetrate-service-bridge/" target="_blank" rel="noopener noreferrer">Tetrate Service Bridge</a> 这样的工具来管理异构平台，帮助你渐渐地从单体应用过度到微服务。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签:</b><a class="margin-horiz--sm" href="/zh-CN/blog/tags/kubernetes">Kubernetes</a><a class="margin-horiz--sm" href="/zh-CN/blog/tags/cloud-native">Cloud-Native</a><a class="margin-horiz--sm" href="/zh-CN/blog/tags/microservice">Microservice</a></div><div class="col text--right"><a aria-label="Read more about 如何调试 Kubernetes 中的微服务 ——proxy、sidecar 还是 service mesh？" href="/zh-CN/blog/2021/07/05/jimmy"><b>阅读更多</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="blogPostTitle_GeHD"><a href="/zh-CN/blog/2021/01/01/">重新定义云原生开发环境</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-01-01T00:00:00.000Z">January 1, 2021</time> · 阅读时间: 2 分钟</div><div class="avatar margin-vert--md"><a href="https://github.com/lyzhang1999" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/8142348?v=4" alt="王炜"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/lyzhang1999" target="_blank" rel="noopener noreferrer">王炜</a></div><small class="avatar__subtitle">Nocalhost 核心团队</small></div></div></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="前言"></a>前言<a class="hash-link" href="#前言" title="直接链接到标题">#</a></h2><p>随着业务的快速发展，技术部门的组织架构在横向及纵向不断扩大和调整，与此同时，企业的生产资料：应用系统，也变得越来越庞大。为了让应用系统适配企业组织架构的调整，梳理组织架构对于应用权责的边界，大部分组织会选择使用“微服务”架构来对应用系统进行横向拆分，使得应用系统的维护边界适配组织架构的权责边界。</p><p>一般来说，越庞大的组织架构，应用系统会被拆分地越来越细，“微服务”的数量也变得越来越多。而在“微服务”的拆分的实践中，很容易出现将组织架构的权责边界一股脑地对标到“微服务”的拆分粒度中，这可能导致“微服务”拆分粒度过细，数量进一步剧增的问题。最终，“微服务”之间的调用关系就像跨部门协作，也变得越来越复杂，问题在想要新增需求时尤为突出。</p><p>“微服务”带来便利的同时，对开发人员而言，还带来了额外的挑战：如何快速启动完整的开发环境？开发的需求依赖于其他同事怎么联调？如何快速调试这些微服务？</p><p>而对于管理人员来说，也同样带来了一系列的挑战：如何管理开发人员的开发环境？如何让新入职的同事快速进行开发？</p><p>试想一下，要开发由 200 个“微服务”组成的云原生应用，会遇到哪些困难呢？</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="localhost-时代"></a>Localhost 时代<a class="hash-link" href="#localhost-时代" title="直接链接到标题">#</a></h2><p>在单体应用的时代，对于开发者来说是极为友好的，开发者使用本机运行应用，修改代码后实时生效，通过浏览器访问 <code>Localhost</code> 实时查看代码效果。</p><figure class="img-frame"><img class="gif-img" src="/zh-CN/img/blog/2021-01-01/local.png"></figure><p>单体应用和“微服务”应用不同，单体应用是 “ALL-IN-ONE” 组织方式，所有的调用关系仅限于在自身的类和函数，应用对硬件的要求一般也不会太高。</p><p>而开发“微服务”应用则大不相同，由于相互间的依赖关系，当需要开发某一个功能或微服务时，不得不将所有依赖的服务都启动起来。随着微服务数量的增加，开发应用所需要的本地资源越来越多，最终导致本地无法满足开发的配置需求。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="云原生解放了部署和运维，开发呢？"></a>云原生解放了部署和运维，开发呢？<a class="hash-link" href="#云原生解放了部署和运维，开发呢？" title="直接链接到标题">#</a></h2><p>云原生和 Kubernetes 的普及，进一步屏蔽了“微服务”应用的复杂度，这主要体现在部署和运维阶段。</p><p>为了解决微服务应用在开发、测试和生产阶段环境一致性的问题，现代的微服务应用开发，都会将每一个组件打包成 Docker 镜像，并以工作负载的形式对其进行部署。利用 DevOps 流水线中的持续集成和持续部署，配合 Kubernetes 探针、HPA、应用自愈的能力，彻底解放了微服务应用的部署和运维环节。</p><p>但我们忽略了一个关键节点：开发阶段</p><p>微服务应用使用 Kubernetes 工作负载封装后，解决了开发过程应用的快速启动问题，开发人员只需要在本地安装单节点的 Kubernetes 集群，例如 Minikube、Kind 等即可快速启动微服务应用。</p><p>但对于开发人员来说，原来单体应用的开发体验变得不复存在，由于应用很难在 Docker 容器之外运行，所以每次代码修改，都需要经历以下步骤：</p><ul><li>执行 docker build 构建镜像</li><li>执行 docker tag 对镜像进行标记</li><li>执行 docker push 推送镜像到仓库</li><li>修改 Kubernetes 工作负载的镜像版本</li><li>等待镜像拉取结束</li><li>等待 Pod 重建</li><li>查看修改后的代码效果</li></ul><p>这直接拖慢了开发的循环反馈过程，每次修改，动辄需要数分钟甚至十分钟的等待时间。</p><figure class="img-frame"><img class="gif-img" src="/zh-CN/img/blog/2021-01-01/circle-zh-cn.png"></figure><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nocalhost---重新定义云原生开发环境"></a>Nocalhost - 重新定义云原生开发环境<a class="hash-link" href="#nocalhost---重新定义云原生开发环境" title="直接链接到标题">#</a></h2><blockquote><p>Nocalhost 是一个云原生开发环境，希望让开发云原生应用像开发单体应用原始又简单。</p></blockquote><p>Nocalhost 重新梳理了开发过程所涉及到的角色和资源：</p><ul><li>团队管理人员</li><li>开发者</li><li>应用</li><li>集群</li><li>开发空间</li></ul><p>通过对这些角色和资源的重新整合，Nocalhost 重新定义了云原生开发环境，并带来了全新的云原生开发体验。</p><p>为了快速理解 Nocalhost 重新定义的云原生开发环境，让我们首先站在不同的角色来看 Nocalhost 能给他们带来什么。</p><p>开发人员：</p><ul><li><strong>摆脱每次修改需要重新 build 新镜像以及长时间的循环反馈，修改代码立即生效</strong></li><li>一键部署开发环境，摆脱本地环境搭建和资源不足的限制</li><li>本地 IDE 编辑器和开发环境联动，支持远程调试</li><li>图形化的 IDE 插件，无需熟悉 <code>kubectl</code> 命令即可完成云原生环境下的开发</li></ul><p>管理人员：</p><ul><li>统一管理微服务应用包，降低应用的维护成本</li><li>统一管理开发环境和集群，提高集群资源的利用率，同时具备隔离特性</li><li>为新员工快速分配开发环境，分配环境后立刻能进行应用开发</li><li>弹性的开发环境资源，用完销毁，降低开发成本</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="快速开始"></a>快速开始<a class="hash-link" href="#快速开始" title="直接链接到标题">#</a></h2><p><a href="/zh-CN/docs/quick-start">一起使用 Nocalhost 进行简单快捷的云原生应用开发</a></p><p>以 Nocalhost 内置的 Demo - Bookinfo 为例，开发 Productpage 这个微服务的过程大大简化：</p><ol><li>连接远程 Kubernetes 集群</li><li>选择需要开发的工作负载，进入开发模式</li><li>Nocalhost IDE 插件会自动将源代码同步到远程 <code>DevContainer</code></li><li>代码更改秒级生效，并不需重建映像或重新启动远程 POD</li></ol><iframe width="100%" height="430" src="https://www.youtube.com/embed/M7i-SR531is" title="Nocalhost Quick Demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="落地案例"></a>落地案例<a class="hash-link" href="#落地案例" title="直接链接到标题">#</a></h2><p>目前，腾讯云 <a href="http://coding.net/" target="_blank" rel="noopener noreferrer">CODING DevOps</a>（近 200 微服务）正在使用 Nocalhost 进行开发，实践验证 Nocalhost 能够大大提高开发效率，缩短循环反馈。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="开源与社区共建"></a>开源与社区共建<a class="hash-link" href="#开源与社区共建" title="直接链接到标题">#</a></h2><p>Nocalhost 目前是 100% 开源的，并已经进入 CNCF Landscape: <a href="https://landscape.cncf.io/" target="_blank" rel="noopener noreferrer">https://landscape.cncf.io/</a>，<a href="https://github.com/nocalhost/nocalhost" target="_blank" rel="noopener noreferrer">代码托管在 Github</a>。</p><p>我们并遵循 Apache-2.0 开源协议，可以免费使用。</p><p>想了解更多关于 Nocalhost 的信息，欢迎查阅<a href="/zh-CN/docs/introduction">Nocalhost 文档</a>。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签:</b><a class="margin-horiz--sm" href="/zh-CN/blog/tags/kubernetes">Kubernetes</a><a class="margin-horiz--sm" href="/zh-CN/blog/tags/cloud-native">Cloud-Native</a></div><div class="col text--right"><a aria-label="Read more about 重新定义云原生开发环境" href="/zh-CN/blog/2021/01/01/"><b>阅读更多</b></a></div></footer></article></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/docs/quick-start">快速开始</a></li><li class="footer__item"><a href="https://github.com/nocalhost/nocalhost" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-CN/docs/introduction">文档</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items"><li class="footer__item"><a href="https://nocalhost.slack.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/nocalhost" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/nocalhost/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/blog">博客</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">版权所有 © 2021 Nocalhost | 项目由 <a href="https://coding.net/" target="_blank">Coding.net</a> 发起</div></div></div></footer></div>
<script src="/zh-CN/assets/js/runtime~main.3aebd872.js"></script>
<script src="/zh-CN/assets/js/main.47873b72.js"></script>
</body>
</html>