"use strict";(self.webpackChunknh_docs=self.webpackChunknh_docs||[]).push([[8423],{3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return m}});var o=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=o.createContext({}),p=function(e){var n=o.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},s=function(e){var n=p(e.components);return o.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,s=a(e,["components","mdxType","originalType","parentName"]),d=p(t),m=r,h=d["".concat(c,".").concat(m)]||d[m]||u[m]||i;return t?o.createElement(h,l(l({ref:n},s),{},{components:t})):o.createElement(h,l({ref:n},s))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,l=new Array(i);l[0]=d;var a={};for(var c in n)hasOwnProperty.call(n,c)&&(a[c]=n[c]);a.originalType=e,a.mdxType="string"==typeof e?e:r,l[1]=a;for(var p=2;p<i;p++)l[p]=t[p];return o.createElement.apply(null,l)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},220:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return a},contentTitle:function(){return c},metadata:function(){return p},toc:function(){return s},default:function(){return d}});var o=t(2122),r=t(9756),i=(t(7294),t(3905)),l=["components"],a={title:"Develop ApiSix Controller with Nocalhost",id:"apisix-controller"},c=void 0,p={unversionedId:"practice/cloud/apisix-controller",id:"practice/cloud/apisix-controller",isDocsHomePage:!1,title:"Develop ApiSix Controller with Nocalhost",description:"1. Preparation",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/practice/cloud/apisix-controller.md",sourceDirName:"practice/cloud",slug:"/practice/cloud/apisix-controller",permalink:"/zh-CN/docs/practice/cloud/apisix-controller",editUrl:"https://crowdin.com/project/nocalhost/zh-CN",tags:[],version:"current",frontMatter:{title:"Develop ApiSix Controller with Nocalhost",id:"apisix-controller"},sidebar:"docs",previous:{title:"Kubernetes Compatibility",permalink:"/zh-CN/docs/practice/cloud/k8s-compatible"},next:{title:"Develop KubeSphere with Nocalhost",permalink:"/zh-CN/docs/practice/cloud/kubesphere"}},s=[{value:"1. Preparation",id:"1-preparation",children:[]},{value:"2. Install ApiSix Controller",id:"2-install-apisix-controller",children:[]},{value:"3. Develop ApiSix Controller",id:"3-develop-apisix-controller",children:[]}],u={toc:s};function d(e){var n=e.components,t=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h3",{id:"1-preparation"},"1. Preparation"),(0,i.kt)("p",null,"ApiSix controller can be deployed on standalone or hosted Kubernetes cluster. You can deploy it on Docker Desktop, minikube, or public cloud platform like GKE, AWS EKS, AKS."),(0,i.kt)("p",null,"This article will deploy ApiSix controller on Docker Desktop, and use Goland with Nocalhost plugin to demonstrate how to develop ApiSix controller."),(0,i.kt)("h3",{id:"2-install-apisix-controller"},"2. Install ApiSix Controller"),(0,i.kt)("p",null,"On Goland with Nocalhost installed, right click the namespace of a standalone cluster which ApiSix controller will be installed on, and click ",(0,i.kt)("inlineCode",{parentName:"p"},"Install Application")," on menu. In the following dialog, input ",(0,i.kt)("inlineCode",{parentName:"p"},"apisix-ingress-controller")," as ",(0,i.kt)("inlineCode",{parentName:"p"},"Name"),", then input ",(0,i.kt)("inlineCode",{parentName:"p"},"https://charts.apiseven.com")," as ",(0,i.kt)("inlineCode",{parentName:"p"},"Chart URL"),". Other options remain default."),(0,i.kt)("h3",{id:"3-develop-apisix-controller"},"3. Develop ApiSix Controller"),(0,i.kt)("p",null,"Right click deployment ",(0,i.kt)("inlineCode",{parentName:"p"},"apisix-ingress-controller"),", and click ",(0,i.kt)("inlineCode",{parentName:"p"},"Dev Config")," on menu. Copy and paste the following Nocalhost configure for ApiSix controller to the file opened just now, then save the file."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'name: apisix-ingress-controller\nserviceType: deployment\ncontainers:\n  - name: apisix-ingress-controller\n    dev:\n        gitUrl: https://github.com/apache/apisix-ingress-controller.git\n        image: codingcorp-docker.pkg.coding.net/nocalhost/dev-images/golang:1.16\n        shell: ""\n        workDir: /home/nocalhost-dev\n        storageClass: ""\n        resources: null\n        persistentVolumeDirs: []\n        command:\n            build: []\n            run:\n              - go\n              - run\n              - main.go\n              - ingress\n              - --config-path\n              - conf/config-default.yaml\n            debug:\n              - dlv\n              - --headless\n              - --log\n              - --listen\n              - :2345\n              - --api-version\n              - "2"\n              - --accept-multiclient\n              - debug\n              - main.go\n              - ingress\n              - --config-path\n              - conf/config-default.yaml\n            hotReloadRun: []\n            hotReloadDebug: []\n        debug: null\n        useDevContainer: false\n        sync: null\n        env: []\n        envFrom: null\n        portForward:\n          - 8080:8080\n')),(0,i.kt)("p",null,"Right click deployment ",(0,i.kt)("inlineCode",{parentName:"p"},"apisix-ingress-controller"),", and click ",(0,i.kt)("inlineCode",{parentName:"p"},"Start DevMode")," on menu. After DevMode started, click Run/Debug button on Goland, and then you can access ApiSix controller service on browser by accessing url ",(0,i.kt)("inlineCode",{parentName:"p"},"http://127.0.0.1:8080"),"."),(0,i.kt)("p",null,"From now on, enjoy your ApiSix controller development."))}d.isMDXComponent=!0}}]);